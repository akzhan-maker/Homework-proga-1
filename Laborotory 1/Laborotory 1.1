#1
def analyze_text(text):
    vowels = "aeiouyаеёиоуыэюя"
    used_vowels = ""
    clean = ""
    for c in text:
        if c.isalpha() or c == " ":
            clean += c.lower()
    for c in clean:
        if c in vowels and c not in used_vowels:
            used_vowels += c
    words = clean.split()
    result = ""
    for w in words:
        if len(w) >= 5 and w[0] == w[-1]:
            if w not in result:
                result += w + " "
    return len(used_vowels), result.strip()
print("1 — вести текст:")
choice = int(input())
if choice == 1:
    text = input("Введите текст: ")
    print(analyze_text(text))  # Вывод :


#2
process_string = lambda s: " ".join([ word[::-1]
    for word in s.split()
    if not any(char.isdigit() for char in word)
    and len(word) % 2 == 0])
text_input = input("Введите строку: ")
result = process_string(text_input)
print("Результат:", result)   # Вывод :

#3
def top_k_words(text, k):
    text = text.lower()
    marks = '.,!?;:-()"'
    clean_text = ""
    for char in text:
        if char not in marks:
            clean_text += char
    words = clean_text.split()
    unique_words = []
    counts = []
    for w in words:
        if w in unique_words:
            index = unique_words.index(w)
            counts[index] += 1
        else:
            unique_words.append(w)
            counts.append(1)
    combined = []
    for i in range(len(unique_words)):
        combined.append([unique_words[i], counts[i]])
    combined.sort()
    combined.sort(key=lambda x: x[1], reverse=True)  # Вывод :

#4
    def analyze_text(text):
    clean_chars = ()
    vowels = set("ауоыиэяюе")
    found_vowels = set()
    for char in clean_chars:
        if char in vowels:
            found_vowels.add(char)
    count_vowels = len(found_vowels)
    words = text.split()
    found_words_list = []
    seen_words = set()
    for word in words:
        clean_word = "".join(char.lower() for char in word if char.isalpha())
        if len(clean_word) >= 5 and clean_word not in seen_words:
            if clean_word and clean_word[0] == clean_word[-1]:
                found_words_list.append(clean_word)
                seen_words.add(clean_word)
    words_str = " ".join(found_words_list)
    return (count_vowels, words_str)
text_example = "Арбуз бобАрбуз, Привет! КазаК и БараБан. Анна, потоП"
print(analyze_text(text_example))   # Вывод: (0, 'казак потоп')

#5
def compress_text(text):
    if not text:
        return ""

    result = []
    count = 1
    start_char = text[0]

    for i in range(1, len(text)):
        if text[i].lower() == text[i-1].lower():
            count += 1
        else:
            result.append(start_char)
            if count > 1:
                result.append(str(count))
            count = 1
            start_char = text[i]
    result.append(start_char)
    if count > 1:
        result.append(str(count))
    return "".join(result)
print(compress_text("aaBBcDDD"))  # Вывод: a2B2cD3

#6
filter_words = lambda text: [
    word for word in text.split()
    if len(word) >= 4
    and word.isalpha()
    and len(set(word.lower())) == len(word)]
test_string = "Apple juice is cold and tasty123 but melon is fresh"
result = filter_words(test_string)
print(result) # Вывод : ['juice', 'cold', 'melon', 'fresh']

#7
import string
def palindrome_words(text):
    clean_text = text.translate(str.maketrans('', '', string.punctuation))
    words = clean_text.split()
    palindromes = set()
    for word in words:
        word_lower = word.lower()
        if len(word_lower) >= 3 and word_lower == word_lower[::-1]:
            palindromes.add(word_lower)
    result = sorted(list(palindromes), key=lambda x: (-len(x), x))
    return result

text = "Дед идет по лесу и собирает грибы для казак"
print(palindrome_words(text)) # Вывод :['казак', 'дед']

#8
VOWELS = "aeiouyаеёиоуыэюя"
categorize_words = lambda text: " ".join([
    word if any(char.isdigit() for char in word)
    else "VOWEL" if word[0].lower() in VOWELS
    else "CONSONANT"
    for word in text.split()])
test_text = "Apple b4nana orange tomato 123py"
result = categorize_words(test_text)
print(result)
# Вывод: VOWEL b4nana VOWEL CONSONANT 123py


#9
def alternate_case_blocks(text, n):
    text = text.replace(" ", "")
    result = []
    block_index = 0
    for i in range(0, len(text), n):
        block = text[i:i+n]
        if block_index % 2 == 0:
            result.append(block.upper())
        else:
            result.append(block.lower())
        block_index += 1
    return "".join(result)
print(alternate_case_blocks("HelloopsWorld", 3))  # Вывод: "HELlooSWOrld"
print(alternate_case_blocks("Python is great", 2))  # Вывод : "PYthONisGReaT"


#10
count_special_words = lambda text: sum(
    1 for word in text.split()
    if len(word) >= 5
    and not word[0].isdigit()
    and any(char.isdigit() for char in word))
test_text = "Python3 version 3.10 is great but 1password and secret2024 are different"
result = count_special_words(test_text)
print(result)   # Вывод : 2


#11
def common_unique_chars(s1, s2):
    set2 = set(s2)
    result = []
    added = set()
    for char in s1:
        if (char in set2 and
            char not in added and
            char != " " and
            not char.isdigit()):
            result.append(char)
            added.add(char)
    return "".join(result)
string1 = "hello world 123"
string2 = "gold rose 456"
print(common_unique_chars(string1, string2))
# Вывод: "elrod"

#12
filter_complex_words = lambda text: [
    word for word in text.split()
    if len(word) > 3
    and word[0].lower() == word[-1].lower()
    and word.lower() != word.lower()[::-1]]
test_text = "level alaska radar window area anna"
result = filter_complex_words(test_text)
print(result)
# Вывод: ['alaska', 'window', 'area']

#13
def replace_every_nth(text, n, char):
    words = text.split(' ')
    result_words = []
    global_counter = 0
    for word in words:
        new_word = list(word)
        if len(word) >= 3:
            for i in range(len(new_word)):
                if not new_word[i].isdigit():
                    global_counter += 1
                    if global_counter % n == 0:
                        new_word[i] = char
        result_words.append("".join(new_word))
    return " ".join(result_words)
text = "Apple 123 banana is tasty"
print(replace_every_nth(text, 2, "*")) # Вывод:(A*p*e 123 *a*a*a is *a*t*)


#14
VOWELS = "aeiouyаеёиоуыэюя"
filter_unique_words = lambda text: ", ".join([
    word for word in text.split()
    if len(set(word.lower())) > 3 and (
        vowel_list := [c for c in word.lower() if c in VOWELS],
        len(vowel_list) == len(set(vowel_list)))[1]])
test_text = "Apple orange banana cucumber python melody"
result = filter_unique_words(test_text)
print(result)
# Вывод: orange, cucumber, python, melody


#15
def word_pattern_sort(text):
    words = text.split()
    groups = {}
    for word in words:
        length = len(word)
        if length not in groups:
            groups[length] = []
        groups[length].append(word)
    VOWELS = "aeiouyаеёиоуыэюя"
    result = []
    for length in sorted(groups.keys()):
        group = groups[length]
        group.sort(key=lambda w: (
            -sum(1 for char in w.lower() if char in VOWELS),
            w.lower()))
        result.extend(group)
    return result
test_text = "apple banana kiwi art egg orange"
print(word_pattern_sort(test_text)) # Вывод:['art', 'egg', 'kiwi', 'apple', 'banana', 'orange']


#16
def transform_list(nums):
    new_list = []
    for n in nums:
        if n < 0:
            continue
        if n % 2 == 0:
            new_list.append(n ** 2)
        elif n > 10:
            digits_sum = sum(int(digit) for digit in str(n))
            new_list.append(digits_sum)
        else:
            new_list.append(n)
    return new_list
numbers = [4, -3, 11, 8, 15]
print(transform_list(numbers))  # Вывод: [16, 2, 64, 6]
